import{s as $e,n as De,o as Qe,x as ze,b as et}from"../chunks/scheduler.aZHIKDCl.js";import{S as Ze,i as Je,e as Q,c as Z,d as ie,g as W,o as se,j as ve,s as he,u as tt,y as Fe,h as fe,v as rt,k as L,w as nt,t as st,a as it,z as Be,x as at,b as Re,f as xe,A as Ge,l as Ie}from"../chunks/index.CHnQ5GUD.js";import{c as ot,g as lt,m as Oe,C as Me,P as ut,B as ct}from"../chunks/global.B7OcXdwR.js";import{w as Ye}from"../chunks/index.Haq8omwQ.js";function Se(m){return(m==null?void 0:m.length)!==void 0?m:Array.from(m)}const ht=!0,St=Object.freeze(Object.defineProperty({__proto__:null,prerender:ht},Symbol.toStringTag,{value:"Module"}));var Xe={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(m,n){(function(l,i){m.exports=i()})(ot,function l(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},h=!i.document&&!!i.postMessage,w=i.IS_PAPA_WORKER||!1,d={},S=0,o={parse:function(t,e){var r=(e=e||{}).dynamicTyping||!1;if(R(r)&&(e.dynamicTypingFunction=r,r={}),e.dynamicTyping=r,e.transform=!!R(e.transform)&&e.transform,e.worker&&o.WORKERS_SUPPORTED){var a=function(){if(!o.WORKERS_SUPPORTED)return!1;var f=(H=i.URL||i.webkitURL||null,M=l.toString(),o.BLOB_URL||(o.BLOB_URL=H.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))),C=new i.Worker(f),H,M;return C.onmessage=A,C.id=S++,d[C.id]=C}();return a.userStep=e.step,a.userChunk=e.chunk,a.userComplete=e.complete,a.userError=e.error,e.step=R(e.step),e.chunk=R(e.chunk),e.complete=R(e.complete),e.error=R(e.error),delete e.worker,void a.postMessage({input:t,config:e,workerId:a.id})}var s=null;return o.NODE_STREAM_INPUT,typeof t=="string"?(t=function(f){return f.charCodeAt(0)===65279?f.slice(1):f}(t),s=e.download?new y(e):new k(e)):t.readable===!0&&R(t.read)&&R(t.on)?s=new b(e):(i.File&&t instanceof File||t instanceof Object)&&(s=new v(e)),s.stream(t)},unparse:function(t,e){var r=!1,a=!0,s=",",f=`\r
`,C='"',H=C+C,M=!1,u=null,x=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||o.BAD_DELIMITERS.filter(function(c){return e.delimiter.indexOf(c)!==-1}).length||(s=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(r=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(M=e.skipEmptyLines),typeof e.newline=="string"&&(f=e.newline),typeof e.quoteChar=="string"&&(C=e.quoteChar),typeof e.header=="boolean"&&(a=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");u=e.columns}e.escapeChar!==void 0&&(H=e.escapeChar+C),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(x=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var _=new RegExp(B(C),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return de(null,t,M);if(typeof t[0]=="object")return de(u||Object.keys(t[0]),t,M)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||u),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),de(t.fields||[],t.data||[],M);throw new Error("Unable to serialize unrecognized input");function de(c,U,re){var V="";typeof c=="string"&&(c=JSON.parse(c)),typeof U=="string"&&(U=JSON.parse(U));var ee=Array.isArray(c)&&0<c.length,Y=!Array.isArray(U[0]);if(ee&&a){for(var X=0;X<c.length;X++)0<X&&(V+=s),V+=te(c[X],X);0<U.length&&(V+=f)}for(var g=0;g<U.length;g++){var I=ee?c.length:U[g].length,N=!1,J=ee?Object.keys(U[g]).length===0:U[g].length===0;if(re&&!ee&&(N=re==="greedy"?U[g].join("").trim()==="":U[g].length===1&&U[g][0].length===0),re==="greedy"&&ee){for(var z=[],ne=0;ne<I;ne++){var K=Y?c[ne]:ne;z.push(U[g][K])}N=z.join("").trim()===""}if(!N){for(var F=0;F<I;F++){0<F&&!J&&(V+=s);var pe=ee&&Y?c[F]:F;V+=te(U[g][pe],F)}g<U.length-1&&(!re||0<I&&!J)&&(V+=f)}}return V}function te(c,U){if(c==null)return"";if(c.constructor===Date)return JSON.stringify(c).slice(1,25);var re=!1;x&&typeof c=="string"&&x.test(c)&&(c="'"+c,re=!0);var V=c.toString().replace(_,H);return(re=re||r===!0||typeof r=="function"&&r(c,U)||Array.isArray(r)&&r[U]||function(ee,Y){for(var X=0;X<Y.length;X++)if(-1<ee.indexOf(Y[X]))return!0;return!1}(V,o.BAD_DELIMITERS)||-1<V.indexOf(s)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?C+V+C:V}}};if(o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!h&&!!i.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=O,o.ParserHandle=p,o.NetworkStreamer=y,o.FileStreamer=v,o.StringStreamer=k,o.ReadableStreamStreamer=b,i.jQuery){var T=i.jQuery;T.fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(f){if(!(T(this).prop("tagName").toUpperCase()==="INPUT"&&T(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var C=0;C<this.files.length;C++)r.push({file:this.files[C],inputElem:this,instanceConfig:T.extend({},e)})}),a(),this;function a(){if(r.length!==0){var f,C,H,M,u=r[0];if(R(t.before)){var x=t.before(u.file,u.inputElem);if(typeof x=="object"){if(x.action==="abort")return f="AbortError",C=u.file,H=u.inputElem,M=x.reason,void(R(t.error)&&t.error({name:f},C,H,M));if(x.action==="skip")return void s();typeof x.config=="object"&&(u.instanceConfig=T.extend(u.instanceConfig,x.config))}else if(x==="skip")return void s()}var _=u.instanceConfig.complete;u.instanceConfig.complete=function(de){R(_)&&_(de,u.file,u.inputElem),s()},o.parse(u.file,u.instanceConfig)}else R(t.complete)&&t.complete()}function s(){r.splice(0,1),a()}}}function E(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var r=ae(e);r.chunkSize=parseInt(r.chunkSize),e.step||e.chunk||(r.chunkSize=null),this._handle=new p(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(e,r){if(this.isFirstChunk&&R(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);a!==void 0&&(e=a)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e;this._partialLine="";var f=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var C=f.meta.cursor;this._finished||(this._partialLine=s.substring(C-this._baseIndex),this._baseIndex=C),f&&f.data&&(this._rowCount+=f.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(w)i.postMessage({results:f,workerId:o.WORKER_ID,finished:H});else if(R(this._config.chunk)&&!r){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);f=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!H||!R(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(e){R(this._config.error)?this._config.error(e):w&&this._config.error&&i.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function y(t){var e;(t=t||{}).chunkSize||(t.chunkSize=o.RemoteChunkSize),E.call(this,t),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),h||(e.onload=P(this._chunkLoaded,this),e.onerror=P(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var r=this._config.downloadRequestHeaders;for(var a in r)e.setRequestHeader(a,r[a])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+s)}try{e.send(this._config.downloadRequestBody)}catch(f){this._chunkError(f.message)}h&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(r){var a=r.getResponseHeader("Content-Range");return a===null?-1:parseInt(a.substring(a.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(r){var a=e.statusText||r;this._sendError(new Error(a))}}function v(t){var e,r;(t=t||{}).chunkSize||(t.chunkSize=o.LocalChunkSize),E.call(this,t);var a=typeof FileReader<"u";this.stream=function(s){this._input=s,r=s.slice||s.webkitSlice||s.mozSlice,a?((e=new FileReader).onload=P(this._chunkLoaded,this),e.onerror=P(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var s=this._input;if(this._config.chunkSize){var f=Math.min(this._start+this._config.chunkSize,this._input.size);s=r.call(s,this._start,f)}var C=e.readAsText(s,this._config.encoding);a||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(s){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(s.target.result)},this._chunkError=function(){this._sendError(e.error)}}function k(t){var e;E.call(this,t=t||{}),this.stream=function(r){return e=r,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var r,a=this._config.chunkSize;return a?(r=e.substring(0,a),e=e.substring(a)):(r=e,e=""),this._finished=!e,this.parseChunk(r)}}}function b(t){E.call(this,t=t||{});var e=[],r=!0,a=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(s){this._input=s,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=P(function(s){try{e.push(typeof s=="string"?s:s.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(f){this._streamError(f)}},this),this._streamError=P(function(s){this._streamCleanUp(),this._sendError(s)},this),this._streamEnd=P(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(t){var e,r,a,s=Math.pow(2,53),f=-s,C=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,u=0,x=0,_=!1,de=!1,te=[],c={data:[],errors:[],meta:{}};if(R(t.step)){var U=t.step;t.step=function(g){if(c=g,ee())V();else{if(V(),c.data.length===0)return;u+=g.data.length,t.preview&&u>t.preview?r.abort():(c.data=c.data[0],U(c,M))}}}function re(g){return t.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function V(){return c&&a&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(c.data=c.data.filter(function(g){return!re(g)})),ee()&&function(){if(!c)return;function g(N,J){R(t.transformHeader)&&(N=t.transformHeader(N,J)),te.push(N)}if(Array.isArray(c.data[0])){for(var I=0;ee()&&I<c.data.length;I++)c.data[I].forEach(g);c.data.splice(0,1)}else c.data.forEach(g)}(),function(){if(!c||!t.header&&!t.dynamicTyping&&!t.transform)return c;function g(N,J){var z,ne=t.header?{}:[];for(z=0;z<N.length;z++){var K=z,F=N[z];t.header&&(K=z>=te.length?"__parsed_extra":te[z]),t.transform&&(F=t.transform(F,K)),F=Y(K,F),K==="__parsed_extra"?(ne[K]=ne[K]||[],ne[K].push(F)):ne[K]=F}return t.header&&(z>te.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+te.length+" fields but parsed "+z,x+J):z<te.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+te.length+" fields but parsed "+z,x+J)),ne}var I=1;return!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(g),I=c.data.length):c.data=g(c.data,0),t.header&&c.meta&&(c.meta.fields=te),x+=I,c}()}function ee(){return t.header&&te.length===0}function Y(g,I){return N=g,t.dynamicTypingFunction&&t.dynamicTyping[N]===void 0&&(t.dynamicTyping[N]=t.dynamicTypingFunction(N)),(t.dynamicTyping[N]||t.dynamicTyping)===!0?I==="true"||I==="TRUE"||I!=="false"&&I!=="FALSE"&&(function(J){if(C.test(J)){var z=parseFloat(J);if(f<z&&z<s)return!0}return!1}(I)?parseFloat(I):H.test(I)?new Date(I):I===""?null:I):I;var N}function X(g,I,N,J){var z={type:g,code:I,message:N};J!==void 0&&(z.row=J),c.errors.push(z)}this.parse=function(g,I,N){var J=t.quoteChar||'"';if(t.newline||(t.newline=function(K,F){K=K.substring(0,1048576);var pe=new RegExp(B(F)+"([^]*?)"+B(F),"gm"),oe=(K=K.replace(pe,"")).split("\r"),ge=K.split(`
`),me=1<ge.length&&ge[0].length<oe[0].length;if(oe.length===1||me)return`
`;for(var le=0,j=0;j<oe.length;j++)oe[j][0]===`
`&&le++;return le>=oe.length/2?`\r
`:"\r"}(g,J)),a=!1,t.delimiter)R(t.delimiter)&&(t.delimiter=t.delimiter(g),c.meta.delimiter=t.delimiter);else{var z=function(K,F,pe,oe,ge){var me,le,j,$;ge=ge||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var Ee=0;Ee<ge.length;Ee++){var D=ge[Ee],Te=0,_e=0,we=0;j=void 0;for(var ye=new O({comments:oe,delimiter:D,newline:F,preview:10}).parse(K),be=0;be<ye.data.length;be++)if(pe&&re(ye.data[be]))we++;else{var ke=ye.data[be].length;_e+=ke,j!==void 0?0<ke&&(Te+=Math.abs(ke-j),j=ke):j=ke}0<ye.data.length&&(_e/=ye.data.length-we),(le===void 0||Te<=le)&&($===void 0||$<_e)&&1.99<_e&&(le=Te,me=D,$=_e)}return{successful:!!(t.delimiter=me),bestDelimiter:me}}(g,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);z.successful?t.delimiter=z.bestDelimiter:(a=!0,t.delimiter=o.DefaultDelimiter),c.meta.delimiter=t.delimiter}var ne=ae(t);return t.preview&&t.header&&ne.preview++,e=g,r=new O(ne),c=r.parse(e,I,N),V(),_?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return _},this.pause=function(){_=!0,r.abort(),e=R(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){M.streamer._halted?(_=!1,M.streamer.parseChunk(e,!0)):setTimeout(M.resume,3)},this.aborted=function(){return de},this.abort=function(){de=!0,r.abort(),c.meta.aborted=!0,R(t.complete)&&t.complete(c),e=""}}function B(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(t){var e,r=(t=t||{}).delimiter,a=t.newline,s=t.comments,f=t.step,C=t.preview,H=t.fastMode,M=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(M=t.escapeChar),(typeof r!="string"||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=","),s===r)throw new Error("Comment character same as delimiter");s===!0?s="#":(typeof s!="string"||-1<o.BAD_DELIMITERS.indexOf(s))&&(s=!1),a!==`
`&&a!=="\r"&&a!==`\r
`&&(a=`
`);var u=0,x=!1;this.parse=function(_,de,te){if(typeof _!="string")throw new Error("Input must be a string");var c=_.length,U=r.length,re=a.length,V=s.length,ee=R(f),Y=[],X=[],g=[],I=u=0;if(!_)return ue();if(t.header&&!de){var N=_.split(a)[0].split(r),J=[],z={},ne=!1;for(var K in N){var F=N[K];R(t.transformHeader)&&(F=t.transformHeader(F,K));var pe=F,oe=z[F]||0;for(0<oe&&(ne=!0,pe=F+"_"+oe),z[F]=oe+1;J.includes(pe);)pe=pe+"_"+oe;J.push(pe)}if(ne){var ge=_.split(a);ge[0]=J.join(r),_=ge.join(a)}}if(H||H!==!1&&_.indexOf(e)===-1){for(var me=_.split(a),le=0;le<me.length;le++){if(g=me[le],u+=g.length,le!==me.length-1)u+=a.length;else if(te)return ue();if(!s||g.substring(0,V)!==s){if(ee){if(Y=[],we(g.split(r)),Le(),x)return ue()}else we(g.split(r));if(C&&C<=le)return Y=Y.slice(0,C),ue(!0)}}return ue()}for(var j=_.indexOf(r,u),$=_.indexOf(a,u),Ee=new RegExp(B(M)+B(e),"g"),D=_.indexOf(e,u);;)if(_[u]!==e)if(s&&g.length===0&&_.substring(u,u+V)===s){if($===-1)return ue();u=$+re,$=_.indexOf(a,u),j=_.indexOf(r,u)}else if(j!==-1&&(j<$||$===-1))g.push(_.substring(u,j)),u=j+U,j=_.indexOf(r,u);else{if($===-1)break;if(g.push(_.substring(u,$)),ke($+re),ee&&(Le(),x))return ue();if(C&&Y.length>=C)return ue(!0)}else for(D=u,u++;;){if((D=_.indexOf(e,D+1))===-1)return te||X.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:u}),be();if(D===c-1)return be(_.substring(u,D).replace(Ee,e));if(e!==M||_[D+1]!==M){if(e===M||D===0||_[D-1]!==M){j!==-1&&j<D+1&&(j=_.indexOf(r,D+1)),$!==-1&&$<D+1&&($=_.indexOf(a,D+1));var Te=ye($===-1?j:Math.min(j,$));if(_.substr(D+1+Te,U)===r){g.push(_.substring(u,D).replace(Ee,e)),_[u=D+1+Te+U]!==e&&(D=_.indexOf(e,u)),j=_.indexOf(r,u),$=_.indexOf(a,u);break}var _e=ye($);if(_.substring(D+1+_e,D+1+_e+re)===a){if(g.push(_.substring(u,D).replace(Ee,e)),ke(D+1+_e+re),j=_.indexOf(r,u),D=_.indexOf(e,u),ee&&(Le(),x))return ue();if(C&&Y.length>=C)return ue(!0);break}X.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:u}),D++}}else D++}return be();function we(ce){Y.push(ce),I=u}function ye(ce){var Ue=0;if(ce!==-1){var Pe=_.substring(D+1,ce);Pe&&Pe.trim()===""&&(Ue=Pe.length)}return Ue}function be(ce){return te||(ce===void 0&&(ce=_.substring(u)),g.push(ce),u=c,we(g),ee&&Le()),ue()}function ke(ce){u=ce,we(g),g=[],$=_.indexOf(a,u)}function ue(ce){return{data:Y,errors:X,meta:{delimiter:r,linebreak:a,aborted:x,truncated:!!ce,cursor:I+(de||0)}}}function Le(){f(ue()),Y=[],X=[]}},this.abort=function(){x=!0},this.getCharIndex=function(){return u}}function A(t){var e=t.data,r=d[e.workerId],a=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){a=!0,G(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:q,resume:q};if(R(r.userStep)){for(var f=0;f<e.results.data.length&&(r.userStep({data:e.results.data[f],errors:e.results.errors,meta:e.results.meta},s),!a);f++);delete e.results}else R(r.userChunk)&&(r.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!a&&G(e.workerId,e.results)}function G(t,e){var r=d[t];R(r.userComplete)&&r.userComplete(e),r.terminate(),delete d[t]}function q(){throw new Error("Not implemented.")}function ae(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=ae(t[r]);return e}function P(t,e){return function(){t.apply(e,arguments)}}function R(t){return typeof t=="function"}return w&&(i.onmessage=function(t){var e=t.data;if(o.WORKER_ID===void 0&&e&&(o.WORKER_ID=e.workerId),typeof e.input=="string")i.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0});else if(i.File&&e.input instanceof File||e.input instanceof Object){var r=o.parse(e.input,e.config);r&&i.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(y.prototype=Object.create(E.prototype)).constructor=y,(v.prototype=Object.create(E.prototype)).constructor=v,(k.prototype=Object.create(k.prototype)).constructor=k,(b.prototype=Object.create(E.prototype)).constructor=b,o})})(Xe);var ft=Xe.exports;const dt=lt(ft),Ce=Ye([]),Ae=Ye(!1);function pt(m){let n;return{c(){n=Q("div"),this.h()},l(l){n=Z(l,"DIV",{id:!0,class:!0}),ie(n).forEach(W),this.h()},h(){se(n,"id","map"),se(n,"class","svelte-f6jyty")},m(l,i){ve(l,n,i)},p:De,i:De,o:De,d(l){l&&W(n)}}}let gt="/toronto.pmtiles";function mt(m){let n,l=new Oe.ScaleControl({maxWidth:100,unit:"metric"});const i=[[-79.7952,43.3915],[-79.0361,43.8934]];let h,w;return Qe(async()=>{let d=new ut;Oe.addProtocol("pmtiles",d.tile);const S=getComputedStyle(document.documentElement);h=S.getPropertyValue("--brandGray").trim(),w=S.getPropertyValue("--brandMedBlue").trim(),n=new Oe.Map({container:"map",style:{version:8,name:"Empty",glyphs:"https://schoolofcities.github.io/fonts/fonts/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]},center:[-79.4156,43.643],zoom:9.9349,maxZoom:16.5,minZoom:9,maxPitch:0,bearing:-17.1,projection:"globe",scrollZoom:!0,maxBounds:i,attributionControl:!0});const T=['<a href="https://openstreetmap.org">OpenStreetMap</a>','<a href="https://open.toronto.ca/">City of Toronto </a>'].join(", ");let E=ct;n.addControl(l,"bottom-left"),n.addControl(new Oe.NavigationControl,"top-left"),n.dragRotate.disable(),n.doubleClickZoom.disable(),n.on("load",function(){n.addSource("protomaps",{type:"vector",url:"pmtiles://"+gt,attribution:T,attributionControl:!1}),E.forEach(k=>{n.addLayer(k)}),n.addSource("campus-locations",{type:"geojson",data:Me}),n.addLayer({id:"campus-points",type:"circle",source:"campus-locations",paint:{"circle-radius":8,"circle-color":"grey"}});function y(k){const b=k.reduce((p,B)=>(p[B]=w,p),{});k.length===0?n.setPaintProperty("campus-points","circle-color",h):n.setPaintProperty("campus-points","circle-color",["match",["get","Campus"],...Object.entries(b).flat(),h])}Ce.subscribe(k=>{ze(Ae)?y(Me.features.map(b=>b.properties.Campus)):y(k)}),Ae.subscribe(()=>{Ce.subscribe(k=>{ze(Ae)?y(Me.features.map(b=>b.properties.Campus)):y(k)})()});const v=new Oe.Popup({closeButton:!1,closeOnClick:!1});n.on("mouseenter","campus-points",k=>{n.getCanvas().style.cursor="pointer";const b=k.features[0].geometry.coordinates.slice(),{Campus:p,Address:B}=k.features[0].properties;v.setLngLat(b).setHTML(`<strong>${p}</strong><br>${B}`).addTo(n)}),n.on("mouseleave","campus-points",()=>{n.getCanvas().style.cursor="",v.remove()})}),n.on("click","campus-points",y=>{const v=y.features[0].properties.Campus,k=ze(Ce);if(k.includes(v)){const b=k.filter(p=>p!==v);Ce.set(b)}else Ce.set([...k,v])}),n.on("moveend",()=>{console.log("Map center:",n.getCenter()),console.log("Map zoom level:",n.getZoom()),console.log("Map Bounds:",n.getBounds())})}),[]}class _t extends Ze{constructor(n){super(),Je(this,n,mt,pt,$e,{})}}function qe(m,n,l){const i=m.slice();return i[11]=n[l],i}function Ne(m,n,l){const i=m.slice();return i[14]=n[l],i}function je(m,n,l){const i=m.slice();return i[17]=n[l],i}function He(m){let n,l,i,h,w,d=m[17].replace(/_/g," ")+"",S,o,T,E;return{c(){n=Q("div"),l=Q("input"),w=he(),S=Re(d),o=he(),this.h()},l(y){n=Z(y,"DIV",{});var v=ie(n);l=Z(v,"INPUT",{type:!0}),w=fe(v),S=xe(v,d),o=fe(v),v.forEach(W),this.h()},h(){se(l,"type","checkbox"),l.value=i=m[17],l.checked=h=m[4].has(m[17])},m(y,v){ve(y,n,v),L(n,l),L(n,w),L(n,S),L(n,o),T||(E=Ge(l,"change",m[6]),T=!0)},p(y,v){v&2&&i!==(i=y[17])&&(l.value=i),v&2&&h!==(h=y[4].has(y[17]))&&(l.checked=h),v&2&&d!==(d=y[17].replace(/_/g," ")+"")&&Ie(S,d)},d(y){y&&W(n),T=!1,E()}}}function Ve(m){let n,l,i,h,w,d=m[14]+"",S,o,T,E;return{c(){n=Q("div"),l=Q("input"),w=he(),S=Re(d),o=he(),this.h()},l(y){n=Z(y,"DIV",{});var v=ie(n);l=Z(v,"INPUT",{type:!0}),w=fe(v),S=xe(v,d),o=fe(v),v.forEach(W),this.h()},h(){se(l,"type","checkbox"),l.value=i=m[14],l.checked=h=m[3].includes(m[14])},m(y,v){ve(y,n,v),L(n,l),L(n,w),L(n,S),L(n,o),T||(E=Ge(l,"change",m[5]),T=!0)},p(y,v){v&1&&i!==(i=y[14])&&(l.value=i),v&9&&h!==(h=y[3].includes(y[14]))&&(l.checked=h),v&1&&d!==(d=y[14]+"")&&Ie(S,d)},d(y){y&&W(n),T=!1,E()}}}function vt(m){let n,l='<li class="svelte-kbhgzf"><strong>No programs found</strong><br/></li>';return{c(){n=Q("ul"),n.innerHTML=l,this.h()},l(i){n=Z(i,"UL",{class:!0,"data-svelte-h":!0}),Fe(n)!=="svelte-1w0wtwl"&&(n.innerHTML=l),this.h()},h(){se(n,"class","program-list svelte-kbhgzf")},m(i,h){ve(i,n,h)},p:De,d(i){i&&W(n)}}}function yt(m){let n,l=Se(m[2]),i=[];for(let h=0;h<l.length;h+=1)i[h]=We(qe(m,l,h));return{c(){n=Q("ul");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){n=Z(h,"UL",{class:!0});var w=ie(n);for(let d=0;d<i.length;d+=1)i[d].l(w);w.forEach(W),this.h()},h(){se(n,"class","program-list svelte-kbhgzf")},m(h,w){ve(h,n,w);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(n,null)},p(h,w){if(w&4){l=Se(h[2]);let d;for(d=0;d<l.length;d+=1){const S=qe(h,l,d);i[d]?i[d].p(S,w):(i[d]=We(S),i[d].c(),i[d].m(n,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=l.length}},d(h){h&&W(n),Be(i,h)}}}function We(m){let n,l,i=m[11]["Program Name"]+"",h,w,d,S=m[11].Division+"",o,T,E,y=m[11].Campus+"",v,k;return{c(){n=Q("li"),l=Q("strong"),h=Re(i),w=Q("br"),d=he(),o=Re(S),T=Q("br"),E=he(),v=Re(y),k=he(),this.h()},l(b){n=Z(b,"LI",{class:!0});var p=ie(n);l=Z(p,"STRONG",{});var B=ie(l);h=xe(B,i),B.forEach(W),w=Z(p,"BR",{}),d=fe(p),o=xe(p,S),T=Z(p,"BR",{}),E=fe(p),v=xe(p,y),k=fe(p),p.forEach(W),this.h()},h(){se(n,"class","svelte-kbhgzf")},m(b,p){ve(b,n,p),L(n,l),L(l,h),L(n,w),L(n,d),L(n,o),L(n,T),L(n,E),L(n,v),L(n,k)},p(b,p){p&4&&i!==(i=b[11]["Program Name"]+"")&&Ie(h,i),p&4&&S!==(S=b[11].Division+"")&&Ie(o,S),p&4&&y!==(y=b[11].Campus+"")&&Ie(v,y)},d(b){b&&W(n)}}}function bt(m){let n,l,i,h,w="Type of Program",d,S,o,T,E,y="Campus",v,k,b,p,B,O,A,G=Se(m[1]),q=[];for(let r=0;r<G.length;r+=1)q[r]=He(je(m,G,r));let ae=Se(m[0]),P=[];for(let r=0;r<ae.length;r+=1)P[r]=Ve(Ne(m,ae,r));function R(r,a){return r[2].length>0?yt:vt}let t=R(m),e=t(m);return O=new _t({}),{c(){n=Q("div"),l=Q("div"),i=Q("div"),h=Q("label"),h.textContent=w,d=he();for(let r=0;r<q.length;r+=1)q[r].c();S=he(),o=Q("div"),T=Q("div"),E=Q("label"),E.textContent=y,v=he(),k=Q("div");for(let r=0;r<P.length;r+=1)P[r].c();b=he(),p=Q("div"),e.c(),B=he(),tt(O.$$.fragment),this.h()},l(r){n=Z(r,"DIV",{class:!0});var a=ie(n);l=Z(a,"DIV",{class:!0});var s=ie(l);i=Z(s,"DIV",{class:!0});var f=ie(i);h=Z(f,"LABEL",{class:!0,"data-svelte-h":!0}),Fe(h)!=="svelte-d0tgr9"&&(h.textContent=w),d=fe(f);for(let x=0;x<q.length;x+=1)q[x].l(f);f.forEach(W),s.forEach(W),S=fe(a),o=Z(a,"DIV",{class:!0});var C=ie(o);T=Z(C,"DIV",{class:!0});var H=ie(T);E=Z(H,"LABEL",{class:!0,"data-svelte-h":!0}),Fe(E)!=="svelte-qtvyv3"&&(E.textContent=y),v=fe(H),k=Z(H,"DIV",{class:!0});var M=ie(k);for(let x=0;x<P.length;x+=1)P[x].l(M);M.forEach(W),H.forEach(W),C.forEach(W),a.forEach(W),b=fe(r),p=Z(r,"DIV",{class:!0});var u=ie(p);e.l(u),B=fe(u),rt(O.$$.fragment,u),u.forEach(W),this.h()},h(){se(h,"class","svelte-kbhgzf"),se(i,"class","filter svelte-kbhgzf"),se(l,"class","program svelte-kbhgzf"),se(E,"class","svelte-kbhgzf"),se(k,"class","campus-filters svelte-kbhgzf"),se(T,"class","filter svelte-kbhgzf"),se(o,"class","campus svelte-kbhgzf"),se(n,"class","filters-container svelte-kbhgzf"),se(p,"class","container svelte-kbhgzf")},m(r,a){ve(r,n,a),L(n,l),L(l,i),L(i,h),L(i,d);for(let s=0;s<q.length;s+=1)q[s]&&q[s].m(i,null);L(n,S),L(n,o),L(o,T),L(T,E),L(T,v),L(T,k);for(let s=0;s<P.length;s+=1)P[s]&&P[s].m(k,null);ve(r,b,a),ve(r,p,a),e.m(p,null),L(p,B),nt(O,p,null),A=!0},p(r,[a]){if(a&82){G=Se(r[1]);let s;for(s=0;s<G.length;s+=1){const f=je(r,G,s);q[s]?q[s].p(f,a):(q[s]=He(f),q[s].c(),q[s].m(i,null))}for(;s<q.length;s+=1)q[s].d(1);q.length=G.length}if(a&41){ae=Se(r[0]);let s;for(s=0;s<ae.length;s+=1){const f=Ne(r,ae,s);P[s]?P[s].p(f,a):(P[s]=Ve(f),P[s].c(),P[s].m(k,null))}for(;s<P.length;s+=1)P[s].d(1);P.length=ae.length}t===(t=R(r))&&e?e.p(r,a):(e.d(1),e=t(r),e&&(e.c(),e.m(p,B)))},i(r){A||(st(O.$$.fragment,r),A=!0)},o(r){it(O.$$.fragment,r),A=!1},d(r){r&&(W(n),W(b),W(p)),Be(q,r),Be(P,r),e.d(),at(O)}}}let Ke="Program Name";function kt(m,n,l){let i;et(m,Ce,b=>l(7,i=b));let h=[],w=[],d=[],S=[],o=new Set,T=[],E=[];Qe(async()=>{fetch("/src/data/access_programs_inventory.csv").then(p=>p.text()).then(p=>{dt.parse(p,{header:!0,complete:B=>{h=B.data;const O=new Map;B.data.forEach(A=>{if(A.Campus&&A.Longitude&&A.Latitude){const G=A.Campus.trim();O.has(G)||O.set(G,{longitude:parseFloat(A.Longitude),latitude:parseFloat(A.Latitude)})}}),w=Array.from(O,([A,G])=>({campus:A,...G})),l(0,d=w.map(A=>A.campus).sort()),l(1,S=[...new Set(B.data.map(A=>A["Type of Program"]).filter(A=>A!=="Outreach & Engagement: Awareness_Career Exploration_Academic Supports; Access: Bridging_Transition_Pre-programs"))].sort()),k()}})})});function y(b){const p=b.target.value;i.includes(p)?(Ce.update(O=>O.filter(A=>A!==p)),p==="Tri-campus"&&Ae.set(!1)):(Ce.update(O=>[...O,p]),p==="Tri-campus"&&Ae.set(!0))}function v(b){const p=b.target.value;b.target.checked?o.add(p):o.delete(p),k()}function k(){const b=new Set(E),B=d.filter(O=>O!=="Tri-campus").every(O=>b.has(O));l(2,T=h.filter(O=>{const A=O["Type of Program"],G=Array.from(o).some(ae=>A.includes(ae)||A.includes("Outreach & Engagement: Awareness_Career Exploration_Academic Supports; Access: Bridging_Transition_Pre-programs"));return(b.size===0||b.has(O.Campus)||B&&O.Campus==="Tri-campus")&&(o.size===0||G)}).sort((O,A)=>{const G=O[Ke]||"",q=A[Ke]||"";return G.localeCompare(q)}))}return m.$$.update=()=>{m.$$.dirty&128&&(l(3,E=i),k())},[d,S,T,E,o,y,v,i]}class Ot extends Ze{constructor(n){super(),Je(this,n,kt,bt,$e,{})}}export{Ot as component,St as universal};
