import{s as ne,n as O,o as he}from"../chunks/scheduler.aZHIKDCl.js";import{S as ae,i as le,e as ye,c as _e,y as ge,o as X,j as xe,g as be,u as we,v as ve,w as ke,t as ze,a as Ne,x as Te}from"../chunks/index.CHnQ5GUD.js";import{C as Y,m as S,P as Ce}from"../chunks/global.ChKctTgR.js";const Ae=!0,xt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ae},Symbol.toStringTag,{value:"Module"}));function Pe(t){const o=+this._x.call(null,t),e=+this._y.call(null,t);return se(this.cover(o,e),o,e,t)}function se(t,o,e,i){if(isNaN(o)||isNaN(e))return t;var r,a=t._root,s={data:i},n=t._x0,p=t._y0,l=t._x1,c=t._y1,f,m,d,g,u,y,h,_;if(!a)return t._root=s,t;for(;a.length;)if((u=o>=(f=(n+l)/2))?n=f:l=f,(y=e>=(m=(p+c)/2))?p=m:c=m,r=a,!(a=a[h=y<<1|u]))return r[h]=s,t;if(d=+t._x.call(null,a.data),g=+t._y.call(null,a.data),o===d&&e===g)return s.next=a,r?r[h]=s:t._root=s,t;do r=r?r[h]=new Array(4):t._root=new Array(4),(u=o>=(f=(n+l)/2))?n=f:l=f,(y=e>=(m=(p+c)/2))?p=m:c=m;while((h=y<<1|u)===(_=(g>=m)<<1|d>=f));return r[_]=a,r[h]=s,t}function Le(t){var o,e,i=t.length,r,a,s=new Array(i),n=new Array(i),p=1/0,l=1/0,c=-1/0,f=-1/0;for(e=0;e<i;++e)isNaN(r=+this._x.call(null,o=t[e]))||isNaN(a=+this._y.call(null,o))||(s[e]=r,n[e]=a,r<p&&(p=r),r>c&&(c=r),a<l&&(l=a),a>f&&(f=a));if(p>c||l>f)return this;for(this.cover(p,l).cover(c,f),e=0;e<i;++e)se(this,s[e],n[e],t[e]);return this}function Me(t,o){if(isNaN(t=+t)||isNaN(o=+o))return this;var e=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,a=(i=Math.floor(o))+1;else{for(var s=r-e||1,n=this._root,p,l;e>t||t>=r||i>o||o>=a;)switch(l=(o<i)<<1|t<e,p=new Array(4),p[l]=n,n=p,s*=2,l){case 0:r=e+s,a=i+s;break;case 1:e=r-s,a=i+s;break;case 2:r=e+s,i=a-s;break;case 3:e=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=n)}return this._x0=e,this._y0=i,this._x1=r,this._y1=a,this}function je(){var t=[];return this.visit(function(o){if(!o.length)do t.push(o.data);while(o=o.next)}),t}function Ee(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function x(t,o,e,i,r){this.node=t,this.x0=o,this.y0=e,this.x1=i,this.y1=r}function Be(t,o,e){var i,r=this._x0,a=this._y0,s,n,p,l,c=this._x1,f=this._y1,m=[],d=this._root,g,u;for(d&&m.push(new x(d,r,a,c,f)),e==null?e=1/0:(r=t-e,a=o-e,c=t+e,f=o+e,e*=e);g=m.pop();)if(!(!(d=g.node)||(s=g.x0)>c||(n=g.y0)>f||(p=g.x1)<r||(l=g.y1)<a))if(d.length){var y=(s+p)/2,h=(n+l)/2;m.push(new x(d[3],y,h,p,l),new x(d[2],s,h,y,l),new x(d[1],y,n,p,h),new x(d[0],s,n,y,h)),(u=(o>=h)<<1|t>=y)&&(g=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=g)}else{var _=t-+this._x.call(null,d.data),w=o-+this._y.call(null,d.data),z=_*_+w*w;if(z<e){var N=Math.sqrt(e=z);r=t-N,a=o-N,c=t+N,f=o+N,i=d.data}}return i}function Se(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var o,e=this._root,i,r,a,s=this._x0,n=this._y0,p=this._x1,l=this._y1,c,f,m,d,g,u,y,h;if(!e)return this;if(e.length)for(;;){if((g=c>=(m=(s+p)/2))?s=m:p=m,(u=f>=(d=(n+l)/2))?n=d:l=d,o=e,!(e=e[y=u<<1|g]))return this;if(!e.length)break;(o[y+1&3]||o[y+2&3]||o[y+3&3])&&(i=o,h=y)}for(;e.data!==t;)if(r=e,!(e=e.next))return this;return(a=e.next)&&delete e.next,r?(a?r.next=a:delete r.next,this):o?(a?o[y]=a:delete o[y],(e=o[0]||o[1]||o[2]||o[3])&&e===(o[3]||o[2]||o[1]||o[0])&&!e.length&&(i?i[h]=e:this._root=e),this):(this._root=a,this)}function Fe(t){for(var o=0,e=t.length;o<e;++o)this.remove(t[o]);return this}function Ie(){return this._root}function Ge(){var t=0;return this.visit(function(o){if(!o.length)do++t;while(o=o.next)}),t}function $e(t){var o=[],e,i=this._root,r,a,s,n,p;for(i&&o.push(new x(i,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(i=e.node,a=e.x0,s=e.y0,n=e.x1,p=e.y1)&&i.length){var l=(a+n)/2,c=(s+p)/2;(r=i[3])&&o.push(new x(r,l,c,n,p)),(r=i[2])&&o.push(new x(r,a,c,l,p)),(r=i[1])&&o.push(new x(r,l,s,n,c)),(r=i[0])&&o.push(new x(r,a,s,l,c))}return this}function Re(t){var o=[],e=[],i;for(this._root&&o.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));i=o.pop();){var r=i.node;if(r.length){var a,s=i.x0,n=i.y0,p=i.x1,l=i.y1,c=(s+p)/2,f=(n+l)/2;(a=r[0])&&o.push(new x(a,s,n,c,f)),(a=r[1])&&o.push(new x(a,c,n,p,f)),(a=r[2])&&o.push(new x(a,s,f,c,l)),(a=r[3])&&o.push(new x(a,c,f,p,l))}e.push(i)}for(;i=e.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function De(t){return t[0]}function Oe(t){return arguments.length?(this._x=t,this):this._x}function qe(t){return t[1]}function Ze(t){return arguments.length?(this._y=t,this):this._y}function pe(t,o,e){var i=new V(o??De,e??qe,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function V(t,o,e,i,r,a){this._x=t,this._y=o,this._x0=e,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function W(t){for(var o={data:t.data},e=o;t=t.next;)e=e.next={data:t.data};return o}var b=pe.prototype=V.prototype;b.copy=function(){var t=new V(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root,e,i;if(!o)return t;if(!o.length)return t._root=W(o),t;for(e=[{source:o,target:t._root=new Array(4)}];o=e.pop();)for(var r=0;r<4;++r)(i=o.source[r])&&(i.length?e.push({source:i,target:o.target[r]=new Array(4)}):o.target[r]=W(i));return t};b.add=Pe;b.addAll=Le;b.cover=Me;b.data=je;b.extent=Ee;b.find=Be;b.remove=Se;b.removeAll=Fe;b.root=Ie;b.size=Ge;b.visit=$e;b.visitAfter=Re;b.x=Oe;b.y=Ze;function C(t){return function(){return t}}function K(t){return(t()-.5)*1e-6}function Ue(t){return t.x+t.vx}function He(t){return t.y+t.vy}function Je(t){var o,e,i,r=1,a=1;typeof t!="function"&&(t=C(t==null?1:+t));function s(){for(var l,c=o.length,f,m,d,g,u,y,h=0;h<a;++h)for(f=pe(o,Ue,He).visitAfter(n),l=0;l<c;++l)m=o[l],u=e[m.index],y=u*u,d=m.x+m.vx,g=m.y+m.vy,f.visit(_);function _(w,z,N,B,j){var k=w.data,R=w.r,v=u+R;if(k){if(k.index>m.index){var P=d-k.x-k.vx,L=g-k.y-k.vy,A=P*P+L*L;A<v*v&&(P===0&&(P=K(i),A+=P*P),L===0&&(L=K(i),A+=L*L),A=(v-(A=Math.sqrt(A)))/A*r,m.vx+=(P*=A)*(v=(R*=R)/(y+R)),m.vy+=(L*=A)*v,k.vx-=P*(v=1-v),k.vy-=L*v)}return}return z>d+v||B<d-v||N>g+v||j<g-v}}function n(l){if(l.data)return l.r=e[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function p(){if(o){var l,c=o.length,f;for(e=new Array(c),l=0;l<c;++l)f=o[l],e[f.index]=+t(f,l,o)}}return s.initialize=function(l,c){o=l,i=c,p()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(r=+l,s):r},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:C(+l),p(),s):t},s}var Qe={value:()=>{}};function ce(){for(var t=0,o=arguments.length,e={},i;t<o;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new q(e)}function q(t){this._=t}function Ve(t,o){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}q.prototype=ce.prototype={constructor:q,on:function(t,o){var e=this._,i=Ve(t+"",e),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(t=i[a]).type)&&(r=Xe(e[r],t.name)))return r;return}if(o!=null&&typeof o!="function")throw new Error("invalid callback: "+o);for(;++a<s;)if(r=(t=i[a]).type)e[r]=ee(e[r],t.name,o);else if(o==null)for(r in e)e[r]=ee(e[r],t.name,null);return this},copy:function(){var t={},o=this._;for(var e in o)t[e]=o[e].slice();return new q(t)},call:function(t,o){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,a;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(o,e)},apply:function(t,o,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(o,e)}};function Xe(t,o){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===o)return r.value}function ee(t,o,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===o){t[i]=Qe,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:o,value:e}),t}var E=0,I=0,F=0,ue=1e3,Z,G,U=0,M=0,H=0,$=typeof performance=="object"&&performance.now?performance:Date,me=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fe(){return M||(me(Ye),M=$.now()+H)}function Ye(){M=0}function J(){this._call=this._time=this._next=null}J.prototype=de.prototype={constructor:J,restart:function(t,o,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?fe():+e)+(o==null?0:+o),!this._next&&G!==this&&(G?G._next=this:Z=this,G=this),this._call=t,this._time=e,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};function de(t,o,e){var i=new J;return i.restart(t,o,e),i}function We(){fe(),++E;for(var t=Z,o;t;)(o=M-t._time)>=0&&t._call.call(void 0,o),t=t._next;--E}function te(){M=(U=$.now())+H,E=I=0;try{We()}finally{E=0,et(),M=0}}function Ke(){var t=$.now(),o=t-U;o>ue&&(H-=o,U=t)}function et(){for(var t,o=Z,e,i=1/0;o;)o._call?(i>o._time&&(i=o._time),t=o,o=o._next):(e=o._next,o._next=null,o=t?t._next=e:Z=e);G=t,Q(i)}function Q(t){if(!E){I&&(I=clearTimeout(I));var o=t-M;o>24?(t<1/0&&(I=setTimeout(te,t-$.now()-H)),F&&(F=clearInterval(F))):(F||(U=$.now(),F=setInterval(Ke,ue)),E=1,me(te))}}const tt=1664525,ot=1013904223,oe=4294967296;function it(){let t=1;return()=>(t=(tt*t+ot)%oe)/oe}var rt=10,nt=Math.PI*(3-Math.sqrt(5));function at(t){var o,e=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,n=new Map,p=de(f),l=ce("tick","end"),c=it();t==null&&(t=[]);function f(){m(),l.call("tick",o),e<i&&(p.stop(),l.call("end",o))}function m(u){var y,h=t.length,_;u===void 0&&(u=1);for(var w=0;w<u;++w)for(e+=(a-e)*r,n.forEach(function(z){z(e)}),y=0;y<h;++y)_=t[y],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return o}function d(){for(var u=0,y=t.length,h;u<y;++u){if(h=t[u],h.index=u,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var _=rt*Math.sqrt(.5+u),w=u*nt;h.x=_*Math.cos(w),h.y=_*Math.sin(w)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function g(u){return u.initialize&&u.initialize(t,c),u}return d(),o={tick:m,restart:function(){return p.restart(f),o},stop:function(){return p.stop(),o},nodes:function(u){return arguments.length?(t=u,d(),n.forEach(g),o):t},alpha:function(u){return arguments.length?(e=+u,o):e},alphaMin:function(u){return arguments.length?(i=+u,o):i},alphaDecay:function(u){return arguments.length?(r=+u,o):+r},alphaTarget:function(u){return arguments.length?(a=+u,o):a},velocityDecay:function(u){return arguments.length?(s=1-u,o):1-s},randomSource:function(u){return arguments.length?(c=u,n.forEach(g),o):c},force:function(u,y){return arguments.length>1?(y==null?n.delete(u):n.set(u,g(y)),o):n.get(u)},find:function(u,y,h){var _=0,w=t.length,z,N,B,j,k;for(h==null?h=1/0:h*=h,_=0;_<w;++_)j=t[_],z=u-j.x,N=y-j.y,B=z*z+N*N,B<h&&(k=j,h=B);return k},on:function(u,y){return arguments.length>1?(l.on(u,y),o):l.on(u)}}}function lt(t){var o=C(.1),e,i,r;typeof t!="function"&&(t=C(t==null?0:+t));function a(n){for(var p=0,l=e.length,c;p<l;++p)c=e[p],c.vx+=(r[p]-c.x)*i[p]*n}function s(){if(e){var n,p=e.length;for(i=new Array(p),r=new Array(p),n=0;n<p;++n)i[n]=isNaN(r[n]=+t(e[n],n,e))?0:+o(e[n],n,e)}}return a.initialize=function(n){e=n,s()},a.strength=function(n){return arguments.length?(o=typeof n=="function"?n:C(+n),s(),a):o},a.x=function(n){return arguments.length?(t=typeof n=="function"?n:C(+n),s(),a):t},a}function st(t){var o=C(.1),e,i,r;typeof t!="function"&&(t=C(t==null?0:+t));function a(n){for(var p=0,l=e.length,c;p<l;++p)c=e[p],c.vy+=(r[p]-c.y)*i[p]*n}function s(){if(e){var n,p=e.length;for(i=new Array(p),r=new Array(p),n=0;n<p;++n)i[n]=isNaN(r[n]=+t(e[n],n,e))?0:+o(e[n],n,e)}}return a.initialize=function(n){e=n,s()},a.strength=function(n){return arguments.length?(o=typeof n=="function"?n:C(+n),s(),a):o},a.y=function(n){return arguments.length?(t=typeof n=="function"?n:C(+n),s(),a):t},a}const pt=[{id:"background-s",type:"background",paint:{"background-color":"#00A189"}},{id:"earth",type:"fill",source:"protomaps","source-layer":"earth",paint:{"fill-color":"#00A189"}},{id:"landuse_park",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"]],paint:{"fill-color":"#00907B"}},{id:"landuse_hospital",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":"#53908a"}},{id:"landuse_industrial",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":"#53908a"}},{id:"landuse_school",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","school","university","college"]],paint:{"fill-color":"#53908a"}},{id:"landuse_beach",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","beach"]],paint:{"fill-color":"#53908a"}},{id:"landuse_zoo",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","zoo"]],paint:{"fill-color":"#53908a"}},{id:"landuse_military",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","military","naval_base","airfield"]],paint:{"fill-color":"#53908a"}},{id:"natural_wood",type:"fill",source:"protomaps","source-layer":"natural",filter:["any",["in","pmap:kind","wood","nature_reserve","forest"]],paint:{"fill-color":"#00907B"}},{id:"natural_scrub",type:"fill",source:"protomaps","source-layer":"natural",filter:["in","pmap:kind","scrub","grassland","grass"],paint:{"fill-color":"#00907B"}},{id:"natural_glacier",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","pmap:kind","glacier"],paint:{"fill-color":"#fcfcfc"}},{id:"natural_sand",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","pmap:kind","sand"],paint:{"fill-color":"#53908a"}},{id:"landuse_aerodrome",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["in","pmap:kind","aerodrome"]],paint:{"fill-color":"#53908a"}},{id:"transit_runway",type:"line",source:"protomaps","source-layer":"transit",filter:["any",["in","pmap:kind_detail","runway"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],2,0,12,4,18,30]}},{id:"transit_taxiway",type:"line",source:"protomaps","source-layer":"transit",minzoom:13,filter:["any",["in","pmap:kind_detail","taxiway"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,15,6]}},{id:"water",type:"fill",source:"protomaps","source-layer":"water",paint:{"fill-color":"#6FC7EA"}},{id:"waterbody_border",type:"line",source:"protomaps","source-layer":"water",paint:{"line-color":"#6FC7EA","line-width":.5}},{id:"physical_line_stream",type:"line",source:"protomaps","source-layer":"physical_line",minzoom:14,filter:["all",["in","pmap:kind","stream"]],paint:{"line-color":"#6FC7EA","line-width":.5}},{id:"physical_line_river",type:"line",source:"protomaps","source-layer":"physical_line",minzoom:9,filter:["all",["in","pmap:kind","river"]],paint:{"line-color":"#6FC7EA","line-width":.5}},{id:"landuse_pedestrian",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","pedestrian"]],paint:{"fill-color":"#bcbcbc"}},{id:"landuse_pier",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","pier"]],paint:{"fill-color":"#bcbcbc"}},{id:"roads_tunnels_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#bcbcbc","line-dasharray":[4.5,.5],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_tunnels_link",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_tunnels_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_tunnels_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_tunnels_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"buildings",type:"fill",source:"protomaps","source-layer":"buildings",paint:{"fill-color":"#bcbcbc","fill-opacity":0}},{id:"transit_pier",type:"line",source:"protomaps","source-layer":"transit",filter:["any",["==","pmap:kind","pier"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,16]}},{id:"roads_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#bcbcbc","line-dasharray":[3,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_link",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],13,1,13.5,1.5,18,11]}},{id:"roads_minor_service",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["==","pmap:kind_detail","service"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],13,1,18,8]}},{id:"roads_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["!=","pmap:kind_detail","service"]],paint:{"line-color":["interpolate",["exponential",1.6],["zoom"],11,"#bcbcbc",16,"#bcbcbc"],"line-width":["interpolate",["exponential",1.6],["zoom"],11,1,12.5,1.5,15,2,18,11]}},{id:"roads_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],7,1,12,1.5,15,3,18,13]}},{id:"roads_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],6,1,12,2,15,3,18,13]}},{id:"roads_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"transit_railway",type:"line",source:"protomaps","source-layer":"transit",filter:["all",["==","pmap:kind","rail"]],paint:{"line-dasharray":[.3,.75],"line-opacity":.5,"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,.15,18,9]}},{id:"boundaries_country",type:"line",source:"protomaps","source-layer":"boundaries",filter:["<=","pmap:min_admin_level",2],paint:{"line-color":"#adadad","line-opacity":0,"line-width":1,"line-dasharray":[3,2]}},{id:"boundaries",type:"line",source:"protomaps","source-layer":"boundaries",filter:[">","pmap:min_admin_level",2],paint:{"line-color":"#adadad","line-width":1,"line-opacity":0,"line-dasharray":[3,2]}},{id:"roads_bridges_other_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_link_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1.5]}},{id:"roads_bridges_minor_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_bridges_medium_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1.5]}},{id:"roads_bridges_major_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,10],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1.5]}},{id:"roads_bridges_other",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":"#bcbcbc","line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_minor",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_bridges_link",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_bridges_medium",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_bridges_major",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_bridges_highway_casing",type:"line",source:"protomaps","source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_bridges_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":"#bcbcbc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"physical_line_waterway_label",type:"symbol",source:"protomaps","source-layer":"physical_line",minzoom:13,filter:["all",["in","pmap:kind","river","stream"]],layout:{"symbol-placement":"line","text-font":["TradeGothic LT Bold"],"text-field":["get","name"],"text-size":12,"text-letter-spacing":.3},paint:{"text-color":"#adadad"}},{id:"physical_point_peak",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["==","pmap:kind","peak"]],layout:{"text-font":["TradeGothic LT Light Regular"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],10,8,16,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":"#adadad","text-halo-width":1.5}},{id:"roads_labels_minor",type:"symbol",source:"protomaps","source-layer":"roads",minzoom:15,filter:["any",["in","pmap:kind","minor_road","other","path"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["TradeGothic LT Bold"],"text-field":["get","name"],"text-size":12},paint:{"text-color":"#adadad","text-halo-color":"#bcbcbc","text-halo-width":2}},{id:"physical_point_ocean",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["in","pmap:kind","sea","ocean","lake","water","bay","strait","fjord"]],layout:{"text-font":["TradeGothic LT Regular"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,10,10,12],"text-letter-spacing":.1,"text-max-width":9,"text-transform":"uppercase"},paint:{"text-color":"#adadad"}},{id:"physical_point_lakes",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["in","pmap:kind","lake","water"]],layout:{"text-font":["TradeGothic LT Regular"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,0,6,12,10,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":"#adadad"}},{id:"roads_labels_major",type:"symbol",source:"protomaps","source-layer":"roads",minzoom:11.51,filter:["any",["in","pmap:kind","highway","major_road","medium_road"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["TradeGothic LT Bold"],"text-field":["get","name"],"text-size":12},paint:{"text-color":"#999999","text-halo-color":"#bcbcbc","text-halo-width":2}},{id:"places_subplace",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","neighbourhood"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["TradeGothic LT Bold"],"text-max-width":7,"text-letter-spacing":.1,"text-padding":["interpolate",["linear"],["zoom"],5,2,8,4,12,18,15,20],"text-size":["interpolate",["exponential",1.2],["zoom"],10,8,14,14,18,24],"text-transform":"uppercase"},paint:{"text-color":"#00A189","text-halo-color":"#bcbcbc","text-halo-width":2,"text-opacity":.3}},{id:"pois_important",type:"symbol",source:"protomaps","source-layer":"pois",filter:["any",["<",["get","pmap:min_zoom"],13]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-font":["TradeGothic LT Bold"],"text-field":["get","name"],"text-size":11,"text-max-width":9,"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2]},paint:{"text-color":"#8f8f8f","text-halo-color":"#bcbcbc","text-halo-width":1.5,"text-opacity":0}},{id:"places_locality_circle",type:"circle",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","locality"],paint:{"circle-radius":2,"circle-stroke-width":1.5,"circle-stroke-color":"#adadad","circle-color":"#bcbcbc","circle-translate":[-6,0]},minzoom:16},{id:"places_locality",type:"symbol",source:"protomaps","source-layer":"places",minzoom:9,filter:["==","pmap:kind","locality"],layout:{"text-field":"{name}","text-font":["case",["<=",["get","pmap:min_zoom"],5],["literal",["TradeGothic LT Bold"]],["literal",["TradeGothic LT Bold"]]],"text-padding":["interpolate",["linear"],["zoom"],5,3,8,7,12,11],"text-size":20,"icon-padding":["interpolate",["linear"],["zoom"],0,2,8,4,10,8,12,6,22,2],"text-anchor":["step",["zoom"],"left",8,"center"],"text-radial-offset":.2},paint:{"text-color":"#00A189","text-halo-color":"#bcbcbc","text-halo-width":0,"text-opacity":.25}},{id:"places_region",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","region"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":["step",["zoom"],["get","name:short"],5,["get","name"]],"text-font":["TradeGothic LT Bold"],"text-size":["interpolate",["linear"],["zoom"],3,11,7,24],"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":"#b3b3b3","text-halo-color":"#bcbcbc","text-halo-width":2}},{id:"places_country",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","country"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["TradeGothic LT Regular"],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","pmap:population_rank"],10],8,[">=",["get","pmap:population_rank"],10],12,0],6,["case",["<",["get","pmap:population_rank"],8],10,[">=",["get","pmap:population_rank"],8],18,0],8,["case",["<",["get","pmap:population_rank"],7],11,[">=",["get","pmap:population_rank"],7],20,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2],"text-transform":"uppercase"},paint:{"text-color":"#b8b8b8"}}],ct=""+new URL("../assets/aspo-logo-blue.Dir1JVF-.png",import.meta.url).href;function ut(t){let o,e=`<div id="map" class="svelte-1nw0tk8"><div class="overlay svelte-1nw0tk8"><a href="https://www.aspo.utoronto.ca" target="_blank" rel="noopener noreferrer" class="svelte-1nw0tk8"><img src="${ct}" alt="Overlay Image" class="svelte-1nw0tk8"/></a></div></div> <div id="att" class="svelte-1nw0tk8"><p class="svelte-1nw0tk8">ASPO gratefully acknowledges Jeff Allen and Scott McCallum at the <a href="https://schoolofcities.utoronto.ca/" target="_blank" style="text-decoration: underline;" class="svelte-1nw0tk8">School of Cities</a> for designing this map. Data for the map are from <a href="https://openstreetmap.org" target="_blank" style="text-decoration: underline;" class="svelte-1nw0tk8">OpenStreetMap</a></p></div>`;return{c(){o=ye("div"),o.innerHTML=e,this.h()},l(i){o=_e(i,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),ge(o)!=="svelte-hk5rxg"&&(o.innerHTML=e),this.h()},h(){X(o,"id","container"),X(o,"class","svelte-1nw0tk8")},m(i,r){xe(i,o,r)},p:O,i:O,o:O,d(i){i&&be(o)}}}let mt="/uoft-aspo/toronto.pmtiles.gz";const ie=50;let T="#1E3765",D="#AB1368",re="#ffffff";function ft(t){let o=pt,e;const i=[];Y.features.forEach(n=>{const p=n.geometry.coordinates,l=n.properties.Programs;for(let c=0;c<l;c++)i.push({type:"Feature",properties:{...n.properties},geometry:{type:"Point",coordinates:[p[0]+(Math.random()-.5)*.01,p[1]+(Math.random()-.5)*.01]},originalCenter:p})});function r(n){const p=n.getZoom(),l=.0062/Math.pow(2,p-10);i.forEach(d=>{d.geometry.coordinates=[d.originalCenter[0]+(Math.random()-.5)*.01,d.originalCenter[1]+(Math.random()-.5)*.01]});const c=i.map(d=>({...d,x:d.geometry.coordinates[0],y:d.geometry.coordinates[1]}));at(c).force("x",lt(d=>d.x).strength(.1)).force("y",st(d=>d.y).strength(.1)).force("collide",Je(l)).stop().tick(100),i.forEach((d,g)=>{d.geometry.coordinates[0]=c[g].x,d.geometry.coordinates[1]=c[g].y});const m=i.map(d=>({...d,geometry:{type:"Point",coordinates:[d.geometry.coordinates[0],d.geometry.coordinates[1]]}}));n.getSource("beeswarm-source").setData({type:"FeatureCollection",features:m})}new S.ScaleControl({maxWidth:100,unit:"metric"});const a=[[-79.7,43.6],[-79.15,43.74]],s=-17.1;return he(async()=>{let n=new Ce;S.addProtocol("pmtiles",n.tile),e=new S.Map({container:"map",style:{version:8,name:"Empty",glyphs:"https://schoolofcities.github.io/fonts/fonts/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]},bounds:a,fitBoundsOptions:{padding:ie,bearing:s},maxPitch:0,maxZoom:11,projection:"globe",scrollZoom:!1,dragPan:!1,dragRotate:!1,doubleClickZoom:!1,touchZoomRotate:!1,keyboard:!1,interactive:!1,attributionControl:!1});const l=[""].join(", ");e.addControl(new S.AttributionControl({compact:!1}),"bottom-right"),e.on("load",()=>{e.addSource("protomaps",{type:"vector",url:"pmtiles://"+mt,attribution:l,attributionControl:!1}),o.forEach(f=>{e.addLayer(f)}),e.addSource("campus-locations",{type:"geojson",data:Y}),e.addSource("beeswarm-source",{type:"geojson",data:{type:"FeatureCollection",features:i}}),e.addLayer({id:"beeswarm",type:"circle",source:"beeswarm-source",paint:{"circle-radius":8,"circle-color":"#F1C500","circle-opacity":.1,"circle-stroke-width":1,"circle-stroke-color":"#ffffff","circle-stroke-opacity":.1}}),r(e),e.addLayer({id:"campus-points",type:"circle",source:"campus-locations",paint:{"circle-radius":["sqrt",["/",["/",["get","Programs"],.0015],Math.PI]],"circle-color":T,"circle-opacity":.8,"circle-stroke-color":re,"circle-stroke-width":2,"circle-stroke-opacity":.99}}),e.addLayer({id:"campus-points-label",type:"symbol",source:"campus-locations",minzoom:8,layout:{"text-field":["get","Campus"],"text-size":19,"text-anchor":"center","text-offset":[0,0],"text-font":["TradeGothic LT Bold"]},paint:{"text-color":T,"text-halo-color":re,"text-halo-width":2.5,"text-halo-blur":.5,"text-opacity":1}}),e.on("zoom",()=>{r(e)});const c=new S.Popup({closeButton:!1,closeOnClick:!1});e.on("mouseenter","campus-points",f=>{e.getCanvas().style.cursor="pointer",f.features[0].geometry.coordinates.slice();const{Campus:m,Address:d}=f.features[0].properties;e.setPaintProperty("campus-points","circle-color",["match",["get","Campus"],m,D,T]),e.setPaintProperty("campus-points-label","text-color",["match",["get","Campus"],m,D,T])}),e.on("mouseleave","campus-points",()=>{e.getCanvas().style.cursor="",c.remove(),e.setPaintProperty("campus-points","circle-color",T),e.setPaintProperty("campus-points-label","text-color",T)}),e.on("click","campus-points",f=>{const{URL:m}=f.features[0].properties;m&&window.open(m,"_blank")}),e.on("mouseenter","campus-points-label",f=>{e.getCanvas().style.cursor="pointer",f.features[0].geometry.coordinates.slice();const{Campus:m,Address:d}=f.features[0].properties;e.setPaintProperty("campus-points","circle-color",["match",["get","Campus"],m,D,T]),e.setPaintProperty("campus-points-label","text-color",["match",["get","Campus"],m,D,T])}),e.on("mouseleave","campus-points-label",()=>{e.getCanvas().style.cursor="",c.remove(),e.setPaintProperty("campus-points","circle-color",T),e.setPaintProperty("campus-points-label","text-color",T)}),e.on("click","campus-points-label",f=>{const{URL:m}=f.features[0].properties;m&&window.open(m,"_blank")})}),window.addEventListener("resize",()=>{e.resize(),e.fitBounds(a,{padding:ie,duration:0,bearing:s})})}),[]}class dt extends ae{constructor(o){super(),le(this,o,ft,ut,ne,{})}}function ht(t){let o,e;return o=new dt({}),{c(){we(o.$$.fragment)},l(i){ve(o.$$.fragment,i)},m(i,r){ke(o,i,r),e=!0},p:O,i(i){e||(ze(o.$$.fragment,i),e=!0)},o(i){Ne(o.$$.fragment,i),e=!1},d(i){Te(o,i)}}}class bt extends ae{constructor(o){super(),le(this,o,null,ht,ne,{})}}export{bt as component,xt as universal};
